{% extends "base.html" %}
{% block content %}
<div class="row g-3">
  <div class="col-lg-6">
    <div class="bg-white p-3 rounded shadow-sm">
      <h4>Brands</h4>
      {% if message %}<div class="alert alert-info">{{ message }}</div>{% endif %}

      <table class="table table-sm align-middle">
        <thead>
          <tr>
            <th>Brand</th>
            <th>Model prefixes</th>
          </tr>
        </thead>
        <tbody>
          {% for b in brands %}
          <tr>
            <td style="width: 35%;">{{ b }}</td>
            <td>
              {% set ps = prefix_map.get(b, []) %}
              {% if ps and ps|length > 0 %}
                {% for p in ps %}
                  <span class="badge bg-secondary me-1">{{ p }}-</span>
                {% endfor %}
              {% else %}
                <span class="text-muted">no prefixes</span>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>

      <hr/>
      <h5>Add model prefix</h5>
      <form method="post" action="/brands/prefix/add" class="row g-2">
        <div class="col-6">
          <label class="form-label">Brand</label>
          <select class="form-select" name="brand_name" required>
            {% for b in brands %}
              <option value="{{ b }}">{{ b }}</option>
            {% endfor %}
          </select>
        </div>
        <div class="col-6">
          <label class="form-label">Prefix (without dash)</label>
          <input class="form-control" name="prefix" placeholder="tf" required>
          <div class="form-text">We will use it as: tf-XXXX</div>
        </div>
        <div class="col-12">
          <button class="btn btn-primary">Save prefix</button>
        </div>
      </form>
    </div>
  </div>

  <div class="col-lg-6">
    <div class="bg-white p-3 rounded shadow-sm">
      <h4>Add brand</h4>
      <form method="post" action="/brands/add">
        <div class="mb-2">
          <label class="form-label">Name</label>
          <input class="form-control" name="name" required>
        </div>
        <button class="btn btn-primary">Save</button>
      </form>
    </div>
  </div>
</div>
{% endblock %}