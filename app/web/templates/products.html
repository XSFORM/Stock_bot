{% extends "base.html" %}
{% block content %}
<div class="row g-3">
  <div class="col-lg-7">
    <div class="bg-white p-3 rounded shadow-sm">
      <h4>Products</h4>

      {% if request.query_params.get('msg') %}
        <div class="alert alert-info">{{ request.query_params.get('msg') }}</div>
      {% endif %}

      <table class="table table-sm">
        <thead>
          <tr>
            <th>Brand</th><th>Model</th><th>Name</th><th>WH</th><th>WH10</th>
          </tr>
        </thead>
        <tbody>
          {% for p in products %}
          <tr>
            <td>{{ p.brand }}</td>
            <td>{{ p.model }}</td>
            <td>{{ p.name }}</td>
            <td>{{ "%.2f"|format(p.wh_price) }}</td>
            <td>{{ "%.2f"|format(p.wh10_price) }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="col-lg-5">
    <div class="bg-white p-3 rounded shadow-sm">
      <h4>Add product + Receive</h4>

      <form method="post" action="/products/add">
        <div class="mb-2">
          <label class="form-label">Brand</label>
          <select class="form-select" name="brand" required>
            {% for b in brands %}
              <option value="{{ b }}">{{ b }}</option>
            {% endfor %}
          </select>
          <div class="form-text">
            If brand is missing, add it in <a href="/brands">Brands</a>.
          </div>
        </div>

        <div class="mb-2">
          <label class="form-label">Model</label>
          <input class="form-control" name="model" required>
        </div>

        <div class="mb-2">
          <label class="form-label">Name</label>
          <input class="form-control" name="name" required>
        </div>

        <div class="mb-2">
          <label class="form-label">Wholesale cost (WH)</label>
          <input class="form-control" name="wh_price" type="number" step="0.01" required>
        </div>

        <hr/>

        <div class="mb-2">
          <label class="form-label">Source</label>
          <select class="form-select" name="source" required>
            {% for s in sources %}
              <option value="{{ s }}">{{ source_labels[s] }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-2">
          <label class="form-label">Warehouse (destination)</label>
          <select class="form-select" name="warehouse" required>
            {% for w in warehouses %}
              <option value="{{ w }}">{{ warehouse_labels[w] }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="mb-2">
          <label class="form-label">Qty</label>
          <input class="form-control" name="qty" type="number" step="0.01" required>
        </div>

        <button class="btn btn-primary">Save</button>
      </form>
    </div>
  </div>
</div>
{% endblock %}